# shape data version 6.00
unit  mm  # mm - millimetre, cm - centimetre, m - metre
shape    initial_shape_1
    name
    coords 0 8.0 5.0 0.0
    coords 1 8.0 29.0 0.0
    coords 2 12.0 9.0 0.0
    coords 3 24.0 5.0 0.0

    line 0 0 1
    line 1 0 3
    line 2 1 3
    point 2 a
shape    rule_1_L
    name
    coords 0 8.0 5.0 0.0
    coords 1 8.0 29.0 0.0
    coords 2 12.0 9.0 0.0
    coords 3 24.0 5.0 0.0

    line 0 0 1
    line 1 0 3
    line 2 1 3
    point 2 a
shape    rule_1_R
    name
    coords 0 8.0 5.0 0.0
    coords 1 8.0 17.0 0.0
    coords 2 8.0 29.0 0.0
    coords 3 10.0 7.0 0.0
    coords 4 10.0 19.0 0.0
    coords 5 16.0 5.0 0.0
    coords 6 16.0 17.0 0.0
    coords 7 18.0 7.0 0.0
    coords 8 24.0 5.0 0.0

    line 0 0 2
    line 1 0 8
    line 2 1 5
    line 3 1 6
    line 4 2 8
    line 5 5 6
    point 3 a
    point 4 a
    point 7 a

initial    initial_shape_1
initial    initial_shape_2
rule    rule_1    rule_1_L -> rule_1_R
rule    rule_2    rule_2_L -> rule_2_R

get_dat_string: good_grammar:
expected '
    # shape data version 6.00
    unit  mm  # mm - millimetre, cm - centimetre, m - metre
    shape    add_h_in_square_L
        name
        coords 0 4.0 4.0 0.0
        coords 1 4.0 28.0 0.0
        coords 2 8.0 24.0 0.0
        coords 3 28.0 4.0 0.0
        coords 4 28.0 28.0 0.0

        line 0 0 1
        line 1 0 3
        line 2 1 4
        line 3 3 4
        point 2 a
    shape    add_h_in_square_R
        name
        coords 0 4.0 4.0 0.0
        coords 1 4.0 16.0 0.0
        coords 2 4.0 28.0 0.0
        coords 3 10.0 22.0 0.0
        coords 4 16.0 4.0 0.0
        coords 5 16.0 28.0 0.0
        coords 6 22.0 10.0 0.0
        coords 7 28.0 4.0 0.0
        coords 8 28.0 16.0 0.0
        coords 9 28.0 28.0 0.0

        line 0 0 2
        line 1 0 7
        line 2 1 5
        line 3 2 9
        line 4 3 6
        line 5 4 8
        line 6 7 9
    shape    add_h_to_h_L
        name
        coords 0 10.0 6.0 0.0
        coords 1 10.0 14.0 0.0
        coords 2 10.0 22.0 0.0
        coords 3 10.0 27.0 0.0
        coords 4 26.0 14.0 0.0

        line 0 0 2
        line 1 1 4
        point 3 a
    shape    add_h_to_h_R
        name
        coords 0 6.0 17.0 0.0
        coords 1 6.0 18.0 0.0
        coords 2 6.0 22.0 0.0
        coords 3 6.0 26.0 0.0
        coords 4 6.0 27.0 0.0
        coords 5 10.0 6.0 0.0
        coords 6 10.0 14.0 0.0
        coords 7 10.0 22.0 0.0
        coords 8 14.0 17.0 0.0
        coords 9 14.0 18.0 0.0
        coords 10 14.0 22.0 0.0
        coords 11 14.0 26.0 0.0
        coords 12 14.0 27.0 0.0
        coords 13 26.0 14.0 0.0

        line 0 1 3
        line 1 2 10
        line 2 5 7
        line 3 6 13
        line 4 9 11
        point 0 a
        point 4 a
        point 8 a
        point 12 a
    shape    delete_labeled_point_L
        name
        coords 0 10.0 10.0 0.0

        point 0 a
    shape    delete_labeled_point_R
        name
    shape    labeled_h
        name
        coords 0 8.0 6.0 0.0
        coords 1 8.0 8.0 0.0
        coords 2 8.0 16.0 0.0
        coords 3 8.0 24.0 0.0
        coords 4 8.0 26.0 0.0
        coords 5 24.0 6.0 0.0
        coords 6 24.0 8.0 0.0
        coords 7 24.0 16.0 0.0
        coords 8 24.0 24.0 0.0
        coords 9 24.0 26.0 0.0

        line 0 1 3
        line 1 2 7
        line 2 6 8
        point 0 a
        point 4 a
        point 5 a
        point 9 a
    shape    labeled_right_triangle
        name
        coords 0 4.0 4.0 0.0
        coords 1 4.0 28.0 0.0
        coords 2 8.0 8.0 0.0
        coords 3 22.0 4.0 0.0

        line 0 0 1
        line 1 0 3
        line 2 1 3
        point 2 a
    shape    labeled_square
        name
        coords 0 4.0 4.0 0.0
        coords 1 4.0 28.0 0.0
        coords 2 8.0 24.0 0.0
        coords 3 28.0 4.0 0.0
        coords 4 28.0 28.0 0.0

        line 0 0 1
        line 1 0 3
        line 2 1 4
        line 3 3 4
        point 2 a
    shape    subdivide_triangle_L
        name
        coords 0 4.0 4.0 0.0
        coords 1 4.0 28.0 0.0
        coords 2 8.0 8.0 0.0
        coords 3 22.0 4.0 0.0

        line 0 0 1
        line 1 0 3
        line 2 1 3
        point 2 a
    shape    subdivide_triangle_R
        name
        coords 0 4.0 4.0 0.0
        coords 1 4.0 16.0 0.0
        coords 2 4.0 28.0 0.0
        coords 3 6.0 6.0 0.0
        coords 4 6.0 18.0 0.0
        coords 5 13.0 4.0 0.0
        coords 6 13.0 16.0 0.0
        coords 7 15.0 6.0 0.0
        coords 8 22.0 4.0 0.0

        line 0 0 2
        line 1 0 8
        line 2 1 5
        line 3 1 6
        line 4 2 8
        line 5 5 6
        point 3 a
        point 4 a
        point 7 a

    initial    labeled_h
    initial    labeled_right_triangle
    initial    labeled_square
    rule    add_h_in_square    add_h_in_square_L -> add_h_in_square_R
    rule    add_h_to_h    add_h_to_h_L -> add_h_to_h_R
    rule    delete_labeled_point    delete_labeled_point_L -> delete_labeled_point_R
    rule    subdivide_triangle    subdivide_triangle_L -> subdivide_triangle_R
'; got '
    # shape data version 6.00
    unit  mm  # mm - millimetre, cm - centimetre, m - metre
    shape    add_h_in_square_L
        name
        coords 0 4.0 4.0 0.0
        coords 1 4.0 28.0 0.0
        coords 2 8.0 24.0 0.0
        coords 3 28.0 4.0 0.0
        coords 4 28.0 28.0 0.0

        line 0 0 1
        line 1 0 3
        line 2 1 4
        line 3 3 4
        point 2 a
    shape    add_h_in_square_R
        name
        coords 0 4.0 4.0 0.0
        coords 1 4.0 16.0 0.0
        coords 2 4.0 28.0 0.0
        coords 3 10.0 22.0 0.0
        coords 4 16.0 4.0 0.0
        coords 5 16.0 28.0 0.0
        coords 6 22.0 10.0 0.0
        coords 7 28.0 4.0 0.0
        coords 8 28.0 16.0 0.0
        coords 9 28.0 28.0 0.0

        line 0 0 2
        line 1 0 7
        line 2 1 5
        line 3 2 9
        line 4 3 6
        line 5 4 8
        line 6 7 9
    shape    add_h_to_h_L
        name
        coords 0 10.0 6.0 0.0
        coords 1 10.0 14.0 0.0
        coords 2 10.0 22.0 0.0
        coords 3 10.0 27.0 0.0
        coords 4 26.0 14.0 0.0

        line 0 0 2
        line 1 1 4
        point 3 a
    shape    add_h_to_h_R
        name
        coords 0 6.0 17.0 0.0
        coords 1 6.0 18.0 0.0
        coords 2 6.0 22.0 0.0
        coords 3 6.0 26.0 0.0
        coords 4 6.0 27.0 0.0
        coords 5 10.0 6.0 0.0
        coords 6 10.0 14.0 0.0
        coords 7 10.0 22.0 0.0
        coords 8 14.0 17.0 0.0
        coords 9 14.0 18.0 0.0
        coords 10 14.0 22.0 0.0
        coords 11 14.0 26.0 0.0
        coords 12 14.0 27.0 0.0
        coords 13 26.0 14.0 0.0

        line 0 1 3
        line 1 2 10
        line 2 5 7
        line 3 6 13
        line 4 9 11
        point 0 a
        point 4 a
        point 8 a
        point 12 a
    shape    delete_labeled_point_L
        name
        coords 0 10.0 10.0 0.0

        point 0 a
    shape    delete_labeled_point_R
        name
    shape    labeled_h
        name
        coords 0 8.0 6.0 0.0
        coords 1 8.0 8.0 0.0
        coords 2 8.0 16.0 0.0
        coords 3 8.0 24.0 0.0
        coords 4 8.0 26.0 0.0
        coords 5 24.0 6.0 0.0
        coords 6 24.0 8.0 0.0
        coords 7 24.0 16.0 0.0
        coords 8 24.0 24.0 0.0
        coords 9 24.0 26.0 0.0

        line 0 1 3
        line 1 2 7
        line 2 6 8
        point 0 a
        point 4 a
        point 5 a
        point 9 a
    shape    labeled_right_triangle
        name
        coords 0 4.0 4.0 0.0
        coords 1 4.0 28.0 0.0
        coords 2 8.0 8.0 0.0
        coords 3 22.0 4.0 0.0

        line 0 0 1
        line 1 0 3
        line 2 1 3
        point 2 a
    shape    labeled_square
        name
        coords 0 4.0 4.0 0.0
        coords 1 4.0 28.0 0.0
        coords 2 8.0 24.0 0.0
        coords 3 28.0 4.0 0.0
        coords 4 28.0 28.0 0.0

        line 0 0 1
        line 1 0 3
        line 2 1 4
        line 3 3 4
        point 2 a
    shape    subdivide_triangle_L
        name
        coords 0 4.0 4.0 0.0
        coords 1 4.0 28.0 0.0
        coords 2 8.0 8.0 0.0
        coords 3 22.0 4.0 0.0

        line 0 0 1
        line 1 0 3
        line 2 1 3
        point 2 a
    shape    subdivide_triangle_R
        name
        coords 0 4.0 4.0 0.0
        coords 1 4.0 16.0 0.0
        coords 2 4.0 28.0 0.0
        coords 3 6.0 6.0 0.0
        coords 4 6.0 18.0 0.0
        coords 5 13.0 4.0 0.0
        coords 6 13.0 16.0 0.0
        coords 7 15.0 6.0 0.0
        coords 8 22.0 4.0 0.0

        line 0 0 2
        line 1 0 8
        line 2 1 5
        line 3 1 6
        line 4 2 8
        line 5 5 6
        point 3 a
        point 4 a
        point 7 a

    initial    labeled_h
    initial    labeled_right_triangle
    initial    labeled_square
    rule    add_h_in_square    add_h_in_square_L -> add_h_in_square_R
    rule    add_h_to_h    add_h_to_h_L -> add_h_to_h_R
    rule    delete_labeled_point    delete_labeled_point_L -> delete_labeled_point_R
    rule    subdivide_triangle    subdivide_triangle_L -> subdivide_triangle_R
'
